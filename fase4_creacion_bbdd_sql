CREATE TABLE dim_date (
    date_key INT PRIMARY KEY,              -- surrogate (yyyymmdd)
    full_date DATE NOT NULL,               -- business key
    year INT,
    month INT,
    month_name VARCHAR(20),
    day INT,
    weekday INT,
    is_weekend BIT,
    is_marketing_active BIT,
    has_promotion BIT
);

CREATE TABLE dim_category (
    category_key INT IDENTITY(1,1) PRIMARY KEY,
    category_id INT NOT NULL,              -- business key
    category_name VARCHAR(100)
);

CREATE TABLE dim_product (
    product_key INT IDENTITY(1,1) PRIMARY KEY,
    product_id INT NOT NULL,               -- business key
    product_name VARCHAR(150),
    base_price DECIMAL(10,2),
    category_key INT
);

CREATE TABLE dim_customer (
    customer_key INT IDENTITY(1,1) PRIMARY KEY,
    customer_id INT NOT NULL,              -- business key
    first_purchase_date DATE,
    customer_type VARCHAR(50),
    country VARCHAR(10)
);

CREATE TABLE dim_channel (
    channel_key INT IDENTITY(1,1) PRIMARY KEY,
    channel_id INT NOT NULL,               -- business key
    channel_name VARCHAR(50)
);

CREATE TABLE fact_sales (
    sales_key INT IDENTITY(1,1) PRIMARY KEY,   -- surrogate PK
    
    order_id INT NOT NULL,                     -- business key
    
    date_key INT NOT NULL,
    customer_key INT NOT NULL,
    product_key INT NOT NULL,
    category_key INT NOT NULL,
    channel_key INT NOT NULL,
    
    order_status VARCHAR(20),
    total_tax_excl DECIMAL(12,2),
    is_new_customer BIT,

    CONSTRAINT fk_sales_date
        FOREIGN KEY (date_key) 
        REFERENCES dbo.dim_date(date_key),

    CONSTRAINT fk_sales_customer
        FOREIGN KEY (customer_key) 
        REFERENCES dbo.dim_customer(customer_key),

    CONSTRAINT fk_sales_product
        FOREIGN KEY (product_key) 
        REFERENCES dbo.dim_product(product_key),

    CONSTRAINT fk_sales_category
        FOREIGN KEY (category_key) 
        REFERENCES dbo.dim_category(category_key),

    CONSTRAINT fk_sales_channel
        FOREIGN KEY (channel_key) 
        REFERENCES dbo.dim_channel(channel_key)
);

proximos pasos: 
Diseñar proceso de carga (ETL con pandas).
Orden de carga: dimensiones → fact.
Resolver mapeo business key → surrogate key.
Preparar tabla futura de predicciones.
